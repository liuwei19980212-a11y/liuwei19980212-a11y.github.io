<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ç”Ÿæ—¥å¿«ä¹ ğŸ‚</title>
<style>
  body{
    margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;
    background:linear-gradient(135deg,#ffe6ee,#f7f2ff);
    font-family:-apple-system,BlinkMacSystemFont,"PingFang SC","Helvetica Neue",Arial;
    color:#333;overflow:hidden;
  }
  .card{
    width:min(560px,90vw);background:#ffffffee;border-radius:22px;
    padding:26px 22px;text-align:center;box-shadow:0 16px 34px rgba(0,0,0,.10);
  }
  h1{margin:0 0 10px;font-size:26px}
  p{margin:10px 0;line-height:1.8}
  .small{font-size:14px;color:#666}
  .btn{
    margin-top:16px;padding:12px 26px;border:0;border-radius:999px;
    background:#ff6b9d;color:#fff;font-size:16px;
  }
  .ghost{
    margin-top:10px;padding:10px 16px;border-radius:999px;border:1px solid rgba(255,107,157,.35);
    background:#fff;color:#ff6b9d;font-size:14px;
  }
  .heart{position:fixed;font-size:22px;animation:float 1.8s ease-out forwards}
  @keyframes float{to{opacity:0;transform:translateY(-120px)}}

  /* åº•éƒ¨å¼¹çª— */
  #mask{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:flex-end;justify-content:center}
  #sheet{width:min(560px,100vw);background:#fff;border-radius:18px 18px 0 0;padding:14px 14px 16px}
  #sheet h3{margin:4px 0 6px;font-size:15px}
  #sheet .desc{margin:0 0 12px;font-size:13px;color:#666;line-height:1.5}
  .grid{display:flex;gap:10px;flex-wrap:wrap}
  .opt{
    flex:1;min-width:140px;padding:11px 12px;border-radius:12px;border:1px solid #eee;
    background:#fafafa;font-size:14px;text-align:center;color:#333;
  }
  .opt strong{color:#ff6b9d}
  .close{margin-top:12px;width:100%;padding:11px 12px;border-radius:12px;border:1px solid #eee;background:#fff;color:#666;font-size:14px}
  #toast{position:fixed;left:50%;bottom:22px;transform:translateX(-50%);
    background:rgba(0,0,0,.75);color:#fff;font-size:13px;padding:10px 12px;border-radius:10px;display:none}
</style>
</head>

<body>
  <div class="card">
    <div style="font-size:42px">ğŸ‚</div>
    <h1><span style="color:#ff6b9d">å¼ æ–‡é™</span>ï¼Œç”Ÿæ—¥å¿«ä¹</h1>

    <p>
      æ„¿ä½ æ–°çš„ä¸€å²ï¼Œ<br>
      æœ‰çƒ­çˆ±ï¼Œæœ‰æœŸå¾…ï¼Œ<br>
      æœ‰äººæƒ¦è®°ï¼Œ<br>
      ä¹Ÿè¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾…ã€‚
    </p>

    <p>â€”â€” æ¥è‡ª <span style="color:#ff6b9d">åˆ˜ä¼Ÿ</span></p>

    <button class="btn" id="boom" type="button">ç‚¹æˆ‘ä¸€ä¸‹ ğŸ¤</button>
    <p class="small" id="tip">ğŸµ ç‚¹ä¸€ä¸‹æŒ‰é’®ï¼Œä¼šæœ‰éŸ³ä¹å’Œå°æƒŠå–œ</p>

    <p class="small" id="countdown"></p>
    <p class="small" id="birthdayLine" style="display:none">ğŸˆ ä»Šå¤©æ˜¯å¥¹ç”Ÿæ—¥</p>

    <button class="ghost" id="choose" type="button">é€‰æ‹©ä¸€ä¸ªAppå»å¬ â†’</button>
    <p class="small" style="color:#999">ç½‘æ˜“äº‘æ‰‹æœºç½‘é¡µæ˜“ç™½å±ï¼šæˆ‘åšæˆâ€œå¤åˆ¶å»æœâ€æ›´ç¨³</p>
  </div>

  <!-- ç½‘é¡µéŸ³ä¹ï¼ˆå…ç‰ˆæƒï¼›iPhoneéœ€è¦ç‚¹æŒ‰é’®æ‰ä¼šæ’­æ”¾ï¼‰ -->
  <audio id="music" preload="auto" playsinline>
    <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_7c2b2b89f7.mp3" type="audio/mpeg">
  </audio>

  <!-- é€‰æ‹©å¼¹çª— -->
  <div id="mask" role="dialog" aria-modal="true">
    <div id="sheet">
      <h3>ğŸ§ ä½ æƒ³ç”¨å“ªä¸ªAppå¬ï¼Ÿ</h3>
      <p class="desc" id="songInfo"></p>

      <div class="grid">
        <button class="opt" id="qq" type="button"><strong>QQéŸ³ä¹</strong> æœç´¢æ‰“å¼€</button>
        <button class="opt" id="netease" type="button"><strong>ç½‘æ˜“äº‘</strong> å¤åˆ¶å»æœ</button>
        <button class="opt" id="kugou" type="button"><strong>é…·ç‹—</strong> æœç´¢æ‰“å¼€</button>
        <button class="opt" id="copy" type="button"><strong>å¤åˆ¶æ­Œå</strong>ï¼ˆä»»æ„Appæœï¼‰</button>
      </div>

      <button class="close" id="close" type="button">å…³é—­</button>
    </div>
  </div>

  <div id="toast">å·²å¤åˆ¶</div>

<script>
  // ====== å¯æ”¹å†…å®¹ï¼ˆåªæ”¹è¿™é‡Œå°±å¤Ÿï¼‰ ======
  const NAME = "å¼ æ–‡é™";
  const FROM = "åˆ˜ä¼Ÿ";
  const SONG_NAME = "NOT CUTE ANYMORE";
  const ARTIST = "ILLIT";
  const BIRTH_MONTH = 1; // 1æœˆ
  const BIRTH_DAY = 14;  // 14å·
  // =====================================

  // åŠ¨æ€ä¿¡æ¯å¡«å……ï¼ˆä¿æŒä½ ç°åœ¨çš„æ–‡æ¡ˆä¸åŠ¨å°±è¡Œï¼‰
  // ï¼ˆè¿™é‡Œä¸åšå¤æ‚æ¨¡æ¿ï¼Œé¿å…ä»£ç å˜é•¿ï¼‰

  const QUERY = `${SONG_NAME} ${ARTIST}`;
  const URLS = {
    qq: `https://y.qq.com/n/ryqq/search?w=${encodeURIComponent(QUERY)}`,
    kugou: `https://www.kugou.com/yy/html/search.html#searchType=song&searchKeyWord=${encodeURIComponent(QUERY)}`
  };

  // å€’è®¡æ—¶/ç”Ÿæ—¥å½“å¤©
  const now = new Date();
  const isBirthday = (now.getMonth()+1===BIRTH_MONTH) && (now.getDate()===BIRTH_DAY);

  const next = new Date(now.getFullYear(), BIRTH_MONTH-1, BIRTH_DAY);
  if (now > next) next.setFullYear(now.getFullYear()+1);
  const days = Math.ceil((next - now)/(1000*60*60*24));

  document.getElementById("countdown").innerText = isBirthday ? "" : `ğŸˆ è·ç¦»ç”Ÿæ—¥è¿˜æœ‰ ${days} å¤©`;
  document.getElementById("birthdayLine").style.display = isBirthday ? "block" : "none";

  // ç‚¹æŒ‰é’®ï¼šæ’­æ”¾éŸ³ä¹ + çˆ±å¿ƒ
  const music = document.getElementById("music");
  document.getElementById("boom").addEventListener("click", ()=>{
    music.play().catch(()=>{});
    document.getElementById("tip").style.display = "none";

    for(let i=0;i<10;i++){
      const h=document.createElement("div");
      h.className="heart";
      h.innerText = Math.random()>.5 ? "ğŸ’–" : "ğŸ†";
      h.style.left = (Math.random()*100) + "vw";
      h.style.bottom = "0";
      document.body.appendChild(h);
      setTimeout(()=>h.remove(),1800);
    }
  });

  // å¼¹çª—
  const mask = document.getElementById("mask");
  const sheetInfo = document.getElementById("songInfo");
  sheetInfo.textContent = `æ­Œåï¼š${SONG_NAME}  Â·  æ­Œæ‰‹ï¼š${ARTIST}`;

  function openSheet(){ mask.style.display="flex"; }
  function closeSheet(){ mask.style.display="none"; }

  document.getElementById("choose").addEventListener("click", openSheet);
  document.getElementById("close").addEventListener("click", closeSheet);
  mask.addEventListener("click",(e)=>{ if(e.target===mask) closeSheet(); });

  // å¤åˆ¶å°å·¥å…·
  const toast = document.getElementById("toast");
  function showToast(t){
    toast.innerText=t; toast.style.display="block";
    setTimeout(()=>toast.style.display="none",1200);
  }
  async function copyText(text){
    try{ await navigator.clipboard.writeText(text); return true; }
    catch(e){ return false; }
  }

  document.getElementById("qq").addEventListener("click", ()=>location.href=URLS.qq);
  document.getElementById("kugou").addEventListener("click", ()=>location.href=URLS.kugou);

  document.getElementById("netease").addEventListener("click", async ()=>{
    const ok = await copyText(QUERY);
    showToast(ok ? "å·²å¤åˆ¶ï¼šå»ç½‘æ˜“äº‘æœå°±è¡Œ" : "å¤åˆ¶å¤±è´¥ï¼šæ‰‹åŠ¨æœä¸€ä¸‹");
    closeSheet();
  });

  document.getElementById("copy").addEventListener("click", async ()=>{
    const ok = await copyText(QUERY);
    showToast(ok ? "å·²å¤åˆ¶ï¼šæ­Œå+æ­Œæ‰‹" : "å¤åˆ¶å¤±è´¥ï¼šæ‰‹åŠ¨å¤åˆ¶");
    closeSheet();
  });
</script>
</body>
</html>
