<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ç”Ÿæ—¥å¿«ä¹ ğŸ‚</title>

<style>
body{
  margin:0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(135deg,#ffe6ee,#f7f2ff);
  font-family:-apple-system,BlinkMacSystemFont,"PingFang SC","Helvetica Neue",Arial;
  color:#333;
  overflow:hidden;
}
.card{
  width:min(560px,90vw);
  background:#ffffffee;
  border-radius:24px;
  padding:28px 24px;
  text-align:center;
  box-shadow:0 20px 40px rgba(0,0,0,.08);
}
h1{margin:0 0 12px;font-size:26px}
p{line-height:1.8;margin:12px 0}

button{
  border:none;
  border-radius:999px;
  font-size:16px;
}
#fireBtn{
  margin-top:18px;
  padding:12px 26px;
  background:#ff6b9d;
  color:#fff;
}
.small{font-size:14px;color:#666;margin-top:12px}
.subtle{font-size:13px;color:#999;margin-top:8px}

.choiceBtn{
  display:inline-block;
  margin-top:10px;
  padding:10px 18px;
  border-radius:999px;
  border:1px solid rgba(255,107,157,.35);
  background:#fff;
  color:#ff6b9d;
  font-size:14px;
}

#birthdayOnly{display:none;margin-top:14px}
#easterEgg{display:none;margin-top:14px;font-size:14px;color:#888}

.heart{
  position:fixed;
  font-size:22px;
  animation:float 2s ease-out forwards;
}
@keyframes float{
  from{opacity:1;transform:translateY(0)}
  to{opacity:0;transform:translateY(-120px)}
}

/* åº•éƒ¨é€‰æ‹©æ¡† */
#sheetMask{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.35);
  display:none;
  align-items:flex-end;
  justify-content:center;
  z-index:9999;
}
#sheet{
  width:min(560px,100vw);
  background:#fff;
  border-radius:18px 18px 0 0;
  padding:16px 16px 18px;
  box-shadow:0 -12px 30px rgba(0,0,0,.18);
}
.sheetTitle{
  font-size:15px;
  font-weight:600;
  margin:4px 0 10px;
}
.sheetDesc{
  font-size:13px;
  color:#666;
  margin:0 0 12px;
  line-height:1.5;
}
.sheetBtns{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.sheetBtn{
  flex:1;
  min-width:140px;
  padding:11px 12px;
  border-radius:12px;
  border:1px solid #eee;
  background:#fafafa;
  font-size:14px;
  text-align:center;
  color:#333;
}
.sheetBtn strong{color:#ff6b9d}
.sheetFooter{
  margin-top:12px;
  display:flex;
  gap:10px;
}
.sheetClose{
  flex:1;
  padding:11px 12px;
  border-radius:12px;
  border:1px solid #eee;
  background:#fff;
  font-size:14px;
  color:#666;
}
.toast{
  position:fixed;
  left:50%;
  bottom:22px;
  transform:translateX(-50%);
  background:rgba(0,0,0,.75);
  color:#fff;
  font-size:13px;
  padding:10px 12px;
  border-radius:10px;
  display:none;
  z-index:10000;
}
</style>
</head>

<body>
<div class="card">
  <div style="font-size:42px">ğŸ‚</div>
  <h1><span style="color:#ff6b9d">å¼ æ–‡é™</span>ï¼Œç”Ÿæ—¥å¿«ä¹</h1>

  <p>
    æ„¿ä½ æ–°çš„ä¸€å²ï¼Œ<br>
    æœ‰çƒ­çˆ±ï¼Œæœ‰æœŸå¾…ï¼Œ<br>
    æœ‰äººæƒ¦è®°ï¼Œ<br>
    ä¹Ÿè¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾…ã€‚
  </p>

  <p>â€”â€” æ¥è‡ª <span style="color:#ff6b9d">åˆ˜ä¼Ÿ</span></p>

  <!-- ğŸµ ç½‘é¡µç”Ÿæ—¥éŸ³ä¹ + çˆ±å¿ƒ -->
  <button id="fireBtn" type="button">ç‚¹æˆ‘ä¸€ä¸‹ ğŸ¤</button>
  <p id="soundTip" class="small">ğŸµ å¦‚æœæ²¡å¬åˆ°éŸ³ä¹ï¼Œç‚¹ä¸€ä¸‹ä¸Šé¢çš„æŒ‰é’®å³å¯</p>

  <p id="countdown" class="small"></p>

  <!-- ğŸ‚ ç”Ÿæ—¥å½“å¤©ä¸“å± -->
  <div id="birthdayOnly">
    <p>
      ğŸ‚ ä»Šå¤©æ˜¯ä½ çš„ç”Ÿæ—¥<br>
      æœ‰äº›è¯å¹³æ—¶ä¸è¯´ï¼Œ<br>
      ä½†ä»Šå¤©å¯ä»¥ã€‚
    </p>
    <p><b>ä½ çœŸçš„ï¼Œå¾ˆå€¼å¾—è¢«è®¤çœŸå¯¹å¾…ã€‚</b></p>
  </div>

  <!-- ğŸ å½©è›‹ï¼šä»…ç”Ÿæ—¥å½“å¤© + ç‚¹æŒ‰é’®æ‰å‡ºç° -->
  <p id="easterEgg">è¿™å¥è¯ï¼Œæœ¬æ¥æ²¡æ‰“ç®—ç»™ä»»ä½•äººçœ‹ã€‚</p>

  <!-- ğŸ§ å¥¹æ¨èçš„æ­Œï¼šå¥¹è‡ªå·±é€‰å¹³å°ï¼ˆä¸ä¼šè‡ªåŠ¨è·³è½¬ï¼‰ -->
  <div style="margin-top:22px">
    <p class="small">ğŸ§ æœ‰ä¸€é¦–ä½ æœ€è¿‘åˆ†äº«çš„æ­Œï¼Œæˆ‘ä¹Ÿå¬äº†ã€‚</p>
    <button class="choiceBtn" id="chooseAppBtn" type="button">é€‰æ‹©ä¸€ä¸ªAppå»å¬ â†’</button>
    <p class="subtle">ä¸å¼ºè¡Œè·³è½¬ï¼Œä½ ç”¨å“ªä¸ªå°±é€‰å“ªä¸ªã€‚</p>
  </div>
</div>

<!-- ğŸµ ç½‘é¡µèƒŒæ™¯éŸ³ä¹ï¼ˆå…ç‰ˆæƒï¼›iPhone éœ€ç‚¹å‡»è§¦å‘ï¼‰ -->
<audio id="music" preload="auto" playsinline>
  <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_7c2b2b89f7.mp3" type="audio/mpeg">
</audio>

<!-- åº•éƒ¨é€‰æ‹©æ¡† -->
<div id="sheetMask" role="dialog" aria-modal="true">
  <div id="sheet">
    <div class="sheetTitle">ğŸ§ ä½ æƒ³ç”¨å“ªä¸ªAppå¬ï¼Ÿ</div>
    <div class="sheetDesc" id="songInfo"></div>

    <div class="sheetBtns">
      <button class="sheetBtn" id="openQQ" type="button"><strong>QQéŸ³ä¹</strong> æœç´¢æ‰“å¼€</button>
      <button class="sheetBtn" id="openNetease" type="button"><strong>ç½‘æ˜“äº‘</strong> æœç´¢æ‰“å¼€</button>
      <button class="sheetBtn" id="openKugou" type="button"><strong>é…·ç‹—</strong> æœç´¢æ‰“å¼€</button>
      <button class="sheetBtn" id="copyName" type="button"><strong>å¤åˆ¶æ­Œå</strong>ï¼ˆä»»æ„Appæœï¼‰</button>
    </div>

    <div class="sheetFooter">
      <button class="sheetClose" id="closeSheet" type="button">å…³é—­</button>
    </div>
  </div>
</div>

<div class="toast" id="toast">å·²å¤åˆ¶</div>

<script>
/** ====== æ­Œæ›²ä¿¡æ¯ï¼ˆç”¨äºâ€œå¤åˆ¶æ­Œå/æœç´¢â€ï¼‰====== **/
const SONG_NAME = "NOT CUTE ANYMORE";
const ARTIST = "ILLIT";
const QUERY = `${SONG_NAME} ${ARTIST}`;

/** æœç´¢é“¾æ¥ï¼ˆè®©å¥¹è‡ªå·±é€‰å¹³å°ï¼‰ */
const URLS = {
  qq: `https://y.qq.com/n/ryqq/search?w=${encodeURIComponent(QUERY)}`,
  netease: `https://music.163.com/#/search/m/?s=${encodeURIComponent(QUERY)}&type=1`,
  kugou: `https://www.kugou.com/yy/html/search.html#searchType=song&searchKeyWord=${encodeURIComponent(QUERY)}`
};

/** ====== å€’è®¡æ—¶/ç”Ÿæ—¥åˆ¤æ–­ï¼ˆ1æœˆ14ï¼‰ ====== **/
const today = new Date();
const isBirthday = today.getMonth() === 0 && today.getDate() === 14;

const birthday = new Date(today.getFullYear(), 0, 14);
if (today > birthday) birthday.setFullYear(today.getFullYear() + 1);
const diff = Math.ceil((birthday - today) / (1000*60*60*24));

document.getElementById("countdown").innerText =
  isBirthday ? "ğŸˆ ä»Šå¤©æ˜¯ä½ çš„ç”Ÿæ—¥" : `ğŸˆ è·ç¦»ç”Ÿæ—¥è¿˜æœ‰ ${diff} å¤©`;

if (isBirthday) document.getElementById("birthdayOnly").style.display="block";

/** ====== iPhone å®‰å…¨æ’­æ”¾éŸ³ä¹ ====== **/
const fireBtn = document.getElementById("fireBtn");
const music = document.getElementById("music");

function playMusicSafe(){
  try{
    music.muted = false;
    music.currentTime = 0;
    const p = music.play();
    if (p && p.catch) p.catch(()=>setTimeout(()=>music.play().catch(()=>{}), 120));
  }catch(e){}
}

fireBtn.addEventListener("click", () => {
  playMusicSafe();
  document.getElementById("soundTip").style.display = "none";

  for(let i=0;i<12;i++){
    const h=document.createElement("div");
    h.className="heart";
    h.innerText="ğŸ’–";
    h.style.left=Math.random()*100+"vw";
    h.style.bottom="0";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),2000);
  }

  if (isBirthday) document.getElementById("easterEgg").style.display = "block";
});

/** ====== é€‰æ‹©å¹³å°å¼¹çª—ï¼ˆç»ä¸è‡ªåŠ¨è·³è½¬ï¼‰ ====== **/
const sheetMask = document.getElementById("sheetMask");
const chooseAppBtn = document.getElementById("chooseAppBtn");
const closeSheet = document.getElementById("closeSheet");
const songInfo = document.getElementById("songInfo");
const toast = document.getElementById("toast");

songInfo.textContent = `æ­Œåï¼š${SONG_NAME}  Â·  æ­Œæ‰‹ï¼š${ARTIST}`;

function openSheet(){
  sheetMask.style.display = "flex";
}
function hideSheet(){
  sheetMask.style.display = "none";
}

chooseAppBtn.addEventListener("click", (e)=>{
  e.preventDefault();
  e.stopPropagation();
  openSheet();
});
closeSheet.addEventListener("click", (e)=>{
  e.preventDefault();
  hideSheet();
});
sheetMask.addEventListener("click", (e)=>{
  if(e.target === sheetMask) hideSheet();
});

document.getElementById("openQQ").addEventListener("click", ()=>{
  window.location.href = URLS.qq;
});
document.getElementById("openNetease").addEventListener("click", ()=>{
  window.location.href = URLS.netease;
});
document.getElementById("openKugou").addEventListener("click", ()=>{
  window.location.href = URLS.kugou;
});

function showToast(text){
  toast.textContent = text;
  toast.style.display = "block";
  setTimeout(()=>toast.style.display="none", 1400);
}

document.getElementById("copyName").addEventListener("click", async ()=>{
  const text = QUERY;
  try{
    await navigator.clipboard.writeText(text);
    showToast("å·²å¤åˆ¶ï¼šæ­Œå+æ­Œæ‰‹");
  }catch(e){
    const ta = document.createElement("textarea");
    ta.value = text;
    document.body.appendChild(ta);
    ta.select();
    try{ document.execCommand("copy"); showToast("å·²å¤åˆ¶ï¼šæ­Œå+æ­Œæ‰‹"); }
    catch(err){ showToast("å¤åˆ¶å¤±è´¥ï¼šè¯·æ‰‹åŠ¨è®°ä¸€ä¸‹"); }
    ta.remove();
  }
  hideSheet();
});
</script>
</body>
</html>
