<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ç”Ÿæ—¥å¿«ä¹ ğŸ‚</title>

<style>
body{
  margin:0;
  min-height:100vh;
  display:flex;

  /* âœ… å¾€ä¸‹ç§»ï¼šæƒ³å†å¾€ä¸‹å°±æŠŠ 18vh æ”¹å¤§ï¼Œæ¯”å¦‚ 22vh / 25vh */
  align-items:flex-start;
  justify-content:center;
  padding-top:18vh;

  /* âœ… èƒŒæ™¯ï¼šç…§ç‰‡ + æŸ”å’Œæ¸å˜ï¼ˆç…§ç‰‡æ–‡ä»¶åæŒ‰ä½ ä»“åº“çš„ bg.jpg.JPGï¼‰ */
  background:
    linear-gradient(135deg,rgba(255,230,238,.65),rgba(247,242,255,.65)),
    url("bg.jpg.JPG") center/cover no-repeat fixed;

  font-family:-apple-system,BlinkMacSystemFont,"PingFang SC","Helvetica Neue",Arial;
  color:#333;
  overflow:hidden;
}

.card{
  width:min(560px,90vw);
  border-radius:24px;
  padding:28px 24px;
  text-align:center;
  box-shadow:0 20px 40px rgba(0,0,0,.10);

  /* âœ… ç™½è‰²å˜â€œæ›´é€æ˜â€å¹¶å¸¦æ¯›ç»ç’ƒ */
  background:rgba(255,255,255,.22);
  backdrop-filter:blur(14px);
  -webkit-backdrop-filter:blur(14px);
  border:1px solid rgba(255,255,255,.35);
}

h1{ margin:0 0 12px; font-size:26px; }
p{ line-height:1.8; margin:12px 0; }
.from{ margin-top:14px; font-weight:500; }

button{
  margin-top:18px;
  padding:12px 26px;
  border:none;
  border-radius:999px;
  background:#ff6b9d;
  color:#fff;
  font-size:16px;
}
button:active{ transform:translateY(1px); }

.small{ font-size:14px; color:#666; margin-top:12px; }

#birthdayOnly{ display:none; margin-top:18px; }
#easterEgg{ display:none; margin-top:14px; font-size:14px; color:#777; }

/* âœ… ç»½æ”¾ç²’å­ï¼ˆğŸ†ğŸ©·ï¼‰ */
.burst{
  position:fixed;
  left:0; top:0;
  width:10px; height:10px;
  transform:translate(-50%,-50%);
  pointer-events:none;
  z-index:9999;
}
.spark{
  position:absolute;
  left:0; top:0;
  transform:translate(-50%,-50%);
  opacity:0;
  animation:pop 2s ease-out forwards; /* âœ… ç»½æ”¾æ›´ä¹…ï¼š2 ç§’ */
  will-change:transform,opacity;
  filter:drop-shadow(0 10px 14px rgba(0,0,0,.14));
}
@keyframes pop{
  0%   { opacity:0; transform:translate(-50%,-50%) scale(.65); }
  10%  { opacity:1; }
  100% { opacity:0; transform:translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) scale(1.12); }
}

/* âœ… QQéŸ³ä¹åº•éƒ¨å¼¹çª— */
.sheetMask{
  position:fixed; inset:0;
  background:rgba(0,0,0,.28);
  display:none;
  z-index:9998;
}
.sheet{
  position:fixed;
  left:50%; bottom:18px;
  transform:translateX(-50%);
  width:min(640px,92vw);
  background:rgba(255,255,255,.96);
  border-radius:18px;
  box-shadow:0 20px 50px rgba(0,0,0,.18);
  padding:14px 14px 10px;
}
.sheetTitle{
  font-size:15px;
  font-weight:600;
  display:flex;
  align-items:center;
  gap:8px;
  margin-bottom:10px;
}
.sheetBtn{
  width:100%;
  border:none;
  border-radius:14px;
  padding:14px 12px;
  font-size:16px;
  background:#fff;
  box-shadow:0 8px 18px rgba(0,0,0,.10);
}
.sheetBtn strong{ font-weight:800; }
.sheetHint{
  font-size:12px;
  color:#666;
  margin:8px 6px 2px;
  line-height:1.5;
}
.sheetCancel{
  width:100%;
  border:none;
  background:transparent;
  padding:12px 0 6px;
  font-size:15px;
  color:#666;
}
</style>
</head>

<body>
<div class="card">
  <div style="font-size:42px">ğŸ‚</div>
  <h1><span style="color:#ff6b9d">å¼ æ–‡é™</span>ï¼Œç”Ÿæ—¥å¿«ä¹</h1>

  <p>
    æ„¿ä½ æ–°çš„ä¸€å²ï¼Œ<br>
    çœ¼é‡Œæœ‰å…‰ï¼Œå¿ƒé‡Œæœ‰ç³–ï¼Œ<br>
    æœ‰äººæƒ¦è®°ï¼Œ<br>
    ä¹Ÿè¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾…ã€‚
  </p>

  <p class="from">â€”â€” æ¥è‡ª <span style="color:#ff6b9d">åˆ˜ä¼Ÿ</span></p>

  <button id="fireBtn">ç‚¹æˆ‘ä¸€ä¸‹ ğŸ’—</button>

  <p id="countdown" class="small"></p>

  <!-- ç”Ÿæ—¥å½“å¤©ä¸“å± -->
  <div id="birthdayOnly">
    <p>
      ğŸ‚ ä»Šå¤©æ˜¯ä½ çš„ç”Ÿæ—¥<br>
      æœ‰äº›è¯å¹³æ—¶ä¸è¯´ï¼Œ<br>
      ä½†ä»Šå¤©å¯ä»¥ã€‚
    </p>
    <p><b>ä½ çœŸçš„ï¼Œå¾ˆå€¼å¾—è¢«è®¤çœŸå¯¹å¾…ã€‚</b></p>
  </div>

  <!-- éšè—å½©è›‹ -->
  <p id="easterEgg">ï¼ˆå°å£°ï¼‰å¦‚æœä½ æ„¿æ„ï¼Œä»Šå¹´æˆ‘æƒ³æŠŠâ€œæƒ¦è®°â€åšå¾—æ›´å…·ä½“ä¸€ç‚¹ã€‚</p>
</div>

<!-- QQéŸ³ä¹å¼¹çª— -->
<div id="mask" class="sheetMask">
  <div class="sheet" role="dialog" aria-modal="true">
    <div class="sheetTitle">ğŸ§ æˆ‘ä¹Ÿå»å¬äº†ä½ æ¨èçš„æ­Œ</div>
    <button id="goQQ" class="sheetBtn">
      å» QQ éŸ³ä¹å¬ <strong>ã€ŠNOT CUTE ANYMOREã€‹</strong>
    </button>
    <div class="sheetHint">
      å¦‚æœæ²¡è‡ªåŠ¨è·³è½¬ï¼šå¯ç‚¹å³ä¸Šè§’â€œâ€¦â€ç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œå†è¯•ä¸€æ¬¡ã€‚
    </div>
    <button id="cancelSheet" class="sheetCancel">å…ˆä¸å¬</button>
  </div>
</div>

<script>
const btn = document.getElementById("fireBtn");
const today = new Date();
const birthday = new Date(today.getFullYear(),0,14);
const isBirthday = today.getMonth()===0 && today.getDate()===14;

if(today>birthday) birthday.setFullYear(today.getFullYear()+1);
const diff = Math.ceil((birthday - today)/(1000*60*60*24));

document.getElementById("countdown").innerText =
  isBirthday ? "ğŸˆ ä»Šå¤©æ˜¯ä½ çš„ç”Ÿæ—¥" : `ğŸˆ è·ç¦»ç”Ÿæ—¥è¿˜æœ‰ ${diff} å¤©`;

if(isBirthday){
  document.getElementById("birthdayOnly").style.display="block";
}

/* âœ… QQéŸ³ä¹é“¾æ¥ï¼ˆä½ ç»™çš„é‚£ä¸ªï¼‰ */
const QQ_URL = "https://c6.y.qq.com/base/fcgi-bin/u?__=cZQLF5iyxaK7";

/* âœ… ç»½æ”¾ï¼šæ›´å¯† + æŒç»­çº¦ 2 ç§’ */
function burst(x, y, count=36){
  const wrap = document.createElement("div");
  wrap.className = "burst";
  wrap.style.left = x + "px";
  wrap.style.top  = y + "px";

  const icons = ["ğŸ†","ğŸ©·","ğŸ’–","âœ¨"];
  for(let i=0;i<count;i++){
    const s = document.createElement("div");
    s.className = "spark";
    s.textContent = icons[Math.floor(Math.random()*icons.length)];

    // â€œçƒŸèŠ±ç»½æ”¾â€åˆ†å¸ƒ
    const angle = (Math.PI * 2) * (i / count) + (Math.random()*0.35);
    const radius = 95 + Math.random()*85;  // âœ… æ›´å¤§æ›´å¯†
    const dx = Math.cos(angle) * radius;
    const dy = Math.sin(angle) * (radius*0.70); // è½»å¾®æ‰ä¸€ç‚¹æ›´åƒçƒŸèŠ±

    // âœ… ä¸é£˜åˆ°é¡¶ï¼šé™åˆ¶å‘ä¸Šçš„è·ç¦»ï¼ˆdy è´Ÿå€¼æœ€å¤§å¹…åº¦ï¼‰
    const clampedDy = Math.max(dy, -170);

    s.style.setProperty("--dx", dx.toFixed(1) + "px");
    s.style.setProperty("--dy", clampedDy.toFixed(1) + "px");

    // éšæœºå¤§å°
    const size = 18 + Math.random()*14;
    s.style.fontSize = size.toFixed(0) + "px";

    wrap.appendChild(s);
  }

  document.body.appendChild(wrap);
  setTimeout(()=>wrap.remove(), 2100);
}

/* âœ… åº•éƒ¨å¼¹çª— */
const mask = document.getElementById("mask");
const goQQ = document.getElementById("goQQ");
const cancelSheet = document.getElementById("cancelSheet");

function openSheet(){
  mask.style.display = "block";
}
function closeSheet(){
  mask.style.display = "none";
}
mask.addEventListener("click",(e)=>{
  if(e.target === mask) closeSheet();
});
cancelSheet.addEventListener("click", closeSheet);
goQQ.addEventListener("click", ()=>{
  window.location.href = QQ_URL;
});

btn.addEventListener("click",(e)=>{
  // âœ… ç»½æ”¾ä½ç½®ï¼šä»¥æŒ‰é’®ä¸ºä¸­å¿ƒï¼Œå¹¶å¸¦ä¸€ç‚¹éšæœºåç§»
  const r = btn.getBoundingClientRect();
  const x0 = (e && e.clientX) ? e.clientX : (r.left + r.width/2);
  const y0 = (e && e.clientY) ? e.clientY : (r.top  + r.height/2);

  // âœ… å…ˆæ¥ä¸€å‘å¤§çš„
  burst(x0, y0, 52);

  // âœ… æŒç»­ç»½æ”¾çº¦ 2 ç§’ï¼ˆä¸æ˜¯ä¸€æ’ï¼‰
  const start = Date.now();
  const duration = 2000; // âœ… 2 ç§’æŒç»­
  const every = 170;     // âœ… æ›´å¯†ï¼šæ•°å€¼è¶Šå°è¶Šå¯†
  const timer = setInterval(()=>{
    const t = Date.now() - start;
    if(t > duration){
      clearInterval(timer);
      return;
    }
    const x = x0 + (Math.random()*180 - 90);
    const y = y0 + (Math.random()*140 - 70);
    burst(x, y, 40 + Math.floor(Math.random()*18));
  }, every);

  // âœ… ç”Ÿæ—¥å½“å¤©æ‰éœ²å½©è›‹æ–‡æ¡ˆï¼ˆä¿æŒä½ åŸé€»è¾‘ï¼‰
  if(isBirthday){
    document.getElementById("easterEgg").style.display="block";
  }

  // âœ… å¼¹å‡ºâ€œå»QQéŸ³ä¹å¬æ­Œâ€
  openSheet();
});
</script>
</body>
</html>
